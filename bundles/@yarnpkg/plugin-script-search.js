/* eslint-disable */
module.exports = {
name: "@yarnpkg/plugin-script-search",
factory: function (require) {
var plugin;(()=>{var t={730:(t,e,i)=>{"use strict";const s=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,r=()=>{const t={enabled:"undefined"!=typeof process&&"0"!==process.env.FORCE_COLOR,visible:!0,styles:{},keys:{}},e=(t,e,i)=>"function"==typeof t?t(e):t.wrap(e,i),r=(i,s)=>{if(""===i||null==i)return"";if(!1===t.enabled)return i;if(!1===t.visible)return"";let r=""+i,n=r.includes("\n"),o=s.length;for(o>0&&s.includes("unstyle")&&(s=[...new Set(["unstyle",...s])].reverse());o-- >0;)r=e(t.styles[s[o]],r,n);return r},n=(e,i,s)=>{t.styles[e]=(t=>{let e=t.open=`[${t.codes[0]}m`,i=t.close=`[${t.codes[1]}m`,s=t.regex=new RegExp(`\\u001b\\[${t.codes[1]}m`,"g");return t.wrap=(t,r)=>{t.includes(i)&&(t=t.replace(s,i+e));let n=e+t+i;return r?n.replace(/\r*\n/g,`${i}$&${e}`):n},t})({name:e,codes:i}),(t.keys[s]||(t.keys[s]=[])).push(e),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let i=t=>r(t,i.stack);return Reflect.setPrototypeOf(i,t),i.stack=this.stack?this.stack.concat(e):[e],i}})};return n("reset",[0,0],"modifier"),n("bold",[1,22],"modifier"),n("dim",[2,22],"modifier"),n("italic",[3,23],"modifier"),n("underline",[4,24],"modifier"),n("inverse",[7,27],"modifier"),n("hidden",[8,28],"modifier"),n("strikethrough",[9,29],"modifier"),n("black",[30,39],"color"),n("red",[31,39],"color"),n("green",[32,39],"color"),n("yellow",[33,39],"color"),n("blue",[34,39],"color"),n("magenta",[35,39],"color"),n("cyan",[36,39],"color"),n("white",[37,39],"color"),n("gray",[90,39],"color"),n("grey",[90,39],"color"),n("bgBlack",[40,49],"bg"),n("bgRed",[41,49],"bg"),n("bgGreen",[42,49],"bg"),n("bgYellow",[43,49],"bg"),n("bgBlue",[44,49],"bg"),n("bgMagenta",[45,49],"bg"),n("bgCyan",[46,49],"bg"),n("bgWhite",[47,49],"bg"),n("blackBright",[90,39],"bright"),n("redBright",[91,39],"bright"),n("greenBright",[92,39],"bright"),n("yellowBright",[93,39],"bright"),n("blueBright",[94,39],"bright"),n("magentaBright",[95,39],"bright"),n("cyanBright",[96,39],"bright"),n("whiteBright",[97,39],"bright"),n("bgBlackBright",[100,49],"bgBright"),n("bgRedBright",[101,49],"bgBright"),n("bgGreenBright",[102,49],"bgBright"),n("bgYellowBright",[103,49],"bgBright"),n("bgBlueBright",[104,49],"bgBright"),n("bgMagentaBright",[105,49],"bgBright"),n("bgCyanBright",[106,49],"bgBright"),n("bgWhiteBright",[107,49],"bgBright"),t.ansiRegex=s,t.hasColor=t.hasAnsi=e=>(t.ansiRegex.lastIndex=0,"string"==typeof e&&""!==e&&t.ansiRegex.test(e)),t.alias=(e,i)=>{let s="string"==typeof i?t[i]:i;if("function"!=typeof s)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");s.stack||(Reflect.defineProperty(s,"name",{value:e}),t.styles[e]=s,s.stack=[e]),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let e=t=>r(t,e.stack);return Reflect.setPrototypeOf(e,t),e.stack=this.stack?this.stack.concat(s.stack):s.stack,e}})},t.theme=e=>{if(null===(i=e)||"object"!=typeof i||Array.isArray(i))throw new TypeError("Expected theme to be an object");var i;for(let i of Object.keys(e))t.alias(i,e[i]);return t},t.alias("unstyle",e=>"string"==typeof e&&""!==e?(t.ansiRegex.lastIndex=0,e.replace(t.ansiRegex,"")):""),t.alias("noop",t=>t),t.none=t.clear=t.noop,t.stripColor=t.unstyle,t.symbols=i(142),t.define=n,t};t.exports=r(),t.exports.create=r},142:t=>{"use strict";const e="undefined"!=typeof process&&"Hyper"===process.env.TERM_PROGRAM,i="undefined"!=typeof process&&"win32"===process.platform,s="undefined"!=typeof process&&"linux"===process.platform,r={ballotDisabled:"â˜’",ballotOff:"â˜",ballotOn:"â˜‘",bullet:"â€¢",bulletWhite:"â—¦",fullBlock:"â–ˆ",heart:"â¤",identicalTo:"â‰¡",line:"â”€",mark:"â€»",middot:"Â·",minus:"ï¼",multiplication:"Ã—",obelus:"Ã·",pencilDownRight:"âœŽ",pencilRight:"âœ",pencilUpRight:"âœ",percent:"%",pilcrow2:"â¡",pilcrow:"Â¶",plusMinus:"Â±",question:"?",section:"Â§",starsOff:"â˜†",starsOn:"â˜…",upDownArrow:"â†•"},n=Object.assign({},r,{check:"âˆš",cross:"Ã—",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"Â»",radioOff:"( )",radioOn:"(*)",warning:"â€¼"}),o=Object.assign({},r,{ballotCross:"âœ˜",check:"âœ”",cross:"âœ–",ellipsisLarge:"â‹¯",ellipsis:"â€¦",info:"â„¹",questionFull:"ï¼Ÿ",questionSmall:"ï¹–",pointer:s?"â–¸":"â¯",pointerSmall:s?"â€£":"â€º",radioOff:"â—¯",radioOn:"â—‰",warning:"âš "});t.exports=i&&!e?n:o,Reflect.defineProperty(t.exports,"common",{enumerable:!1,value:r}),Reflect.defineProperty(t.exports,"windows",{enumerable:!1,value:n}),Reflect.defineProperty(t.exports,"other",{enumerable:!1,value:o})},907:(t,e,i)=>{"use strict";const s="Apple_Terminal"===process.env.TERM_PROGRAM,r=i(730),n=i(546),o=t.exports=e,a="[";let h=!1;const l=o.code={bell:"",beep:"",beginning:"[G",down:"[J",esc:a,getPosition:"[6n",hide:"[?25l",line:"[2K",lineEnd:"[K",lineStart:"[1K",restorePosition:a+(s?"8":"u"),savePosition:a+(s?"7":"s"),screen:"[2J",show:"[?25h",up:"[1J"},c=o.cursor={get hidden(){return h},hide:()=>(h=!0,l.hide),show:()=>(h=!1,l.show),forward:(t=1)=>`[${t}C`,backward:(t=1)=>`[${t}D`,nextLine:(t=1)=>"[E".repeat(t),prevLine:(t=1)=>"[F".repeat(t),up:(t=1)=>t?`[${t}A`:"",down:(t=1)=>t?`[${t}B`:"",right:(t=1)=>t?`[${t}C`:"",left:(t=1)=>t?`[${t}D`:"",to:(t,e)=>e?`[${e+1};${t+1}H`:`[${t+1}G`,move(t=0,e=0){let i="";return i+=t<0?c.left(-t):t>0?c.right(t):"",i+=e<0?c.up(-e):e>0?c.down(e):"",i},restore(t={}){let{after:e,cursor:i,initial:s,input:r,prompt:a,size:h,value:l}=t;if(s=n.isPrimitive(s)?String(s):"",r=n.isPrimitive(r)?String(r):"",l=n.isPrimitive(l)?String(l):"",h){let t=o.cursor.up(h)+o.cursor.to(a.length),e=r.length-i;return e>0&&(t+=o.cursor.left(e)),t}if(l||e){let t=!r&&s?-s.length:-r.length+i;return e&&(t-=e.length),""===r&&s&&!a.includes(s)&&(t+=s.length),o.cursor.move(t)}}},u=o.erase={screen:l.screen,up:l.up,down:l.down,line:l.line,lineEnd:l.lineEnd,lineStart:l.lineStart,lines(t){let e="";for(let i=0;i<t;i++)e+=o.erase.line+(i<t-1?o.cursor.up(1):"");return t&&(e+=o.code.beginning),e}};o.clear=(t="",e=process.stdout.columns)=>{if(!e)return u.line+c.to(0);let i=t.split(/\r?\n/),s=0;for(let t of i)s+=1+Math.floor(Math.max((n=t,[...r.unstyle(n)].length-1),0)/e);var n;return(u.line+c.prevLine()).repeat(s-1)+u.line+c.to(0)}},726:(t,e)=>{"use strict";e.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"},e.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"},e.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"},e.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"},e.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}},914:(t,e,i)=>{"use strict";const s=i(521),r=i(726),n=/^(?:\x1b)([a-zA-Z0-9])$/,o=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,a={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"};const h=(t="",e={})=>{let i,s={name:e.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:t,raw:t,...e};if(Buffer.isBuffer(t)?t[0]>127&&void 0===t[1]?(t[0]-=128,t=""+String(t)):t=String(t):void 0!==t&&"string"!=typeof t?t=String(t):t||(t=s.sequence||""),s.sequence=s.sequence||t||s.name,"\r"===t)s.raw=void 0,s.name="return";else if("\n"===t)s.name="enter";else if("\t"===t)s.name="tab";else if("\b"===t||""===t||""===t||"\b"===t)s.name="backspace",s.meta=""===t.charAt(0);else if(""===t||""===t)s.name="escape",s.meta=2===t.length;else if(" "===t||" "===t)s.name="space",s.meta=2===t.length;else if(t<="")s.name=String.fromCharCode(t.charCodeAt(0)+"a".charCodeAt(0)-1),s.ctrl=!0;else if(1===t.length&&t>="0"&&t<="9")s.name="number";else if(1===t.length&&t>="a"&&t<="z")s.name=t;else if(1===t.length&&t>="A"&&t<="Z")s.name=t.toLowerCase(),s.shift=!0;else if(i=n.exec(t))s.meta=!0,s.shift=/^[A-Z]$/.test(i[1]);else if(i=o.exec(t)){let e=[...t];""===e[0]&&""===e[1]&&(s.option=!0);let r=[i[1],i[2],i[4],i[6]].filter(Boolean).join(""),n=(i[3]||i[5]||1)-1;s.ctrl=!!(4&n),s.meta=!!(10&n),s.shift=!!(1&n),s.code=r,s.name=a[r],s.shift=function(t){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(t)}(r)||s.shift,s.ctrl=function(t){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(t)}(r)||s.ctrl}return s};h.listen=(t={},e)=>{let{stdin:i}=t;if(!i||i!==process.stdin&&!i.isTTY)throw new Error("Invalid stream passed");let r=s.createInterface({terminal:!0,input:i});s.emitKeypressEvents(i,r);let n=(t,i)=>e(t,h(t,i),r),o=i.isRaw;i.isTTY&&i.setRawMode(!0),i.on("keypress",n),r.resume();return()=>{i.isTTY&&i.setRawMode(o),i.removeListener("keypress",n),r.pause(),r.close()}},h.action=(t,e,i)=>{let s={...r,...i};return e.ctrl?(e.action=s.ctrl[e.name],e):e.option&&s.option?(e.action=s.option[e.name],e):e.shift?(e.action=s.shift[e.name],e):(e.action=s.keys[e.name],e)},t.exports=h},232:(t,e,i)=>{"use strict";const s=i(361),r=i(730),n=i(914),o=i(940),a=i(873),h=i(227),l=i(546),c=i(907);class u extends s{constructor(t={}){super(),this.name=t.name,this.type=t.type,this.options=t,h(this),o(this),this.state=new a(this),this.initial=[t.initial,t.default].find(t=>null!=t),this.stdout=t.stdout||process.stdout,this.stdin=t.stdin||process.stdin,this.scale=t.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=function(t){"number"==typeof t&&(t=[t,t,t,t]);let e=[].concat(t||[]),i=t=>t%2==0?"\n":" ",s=[];for(let t=0;t<4;t++){let r=i(t);e[t]?s.push(r.repeat(e[t])):s.push("")}return s}(this.options.margin),this.setMaxListeners(0),function(t){let e=e=>void 0===t[e]||"function"==typeof t[e],i=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let r of Object.keys(t.options)){if(i.includes(r))continue;if(/^on[A-Z]/.test(r))continue;let n=t.options[r];"function"==typeof n&&e(r)?s.includes(r)||(t[r]=n.bind(t)):"function"!=typeof t[r]&&(t[r]=n)}}(this)}async keypress(t,e={}){this.keypressed=!0;let i=n.action(t,n(t,e),this.options.actions);this.state.keypress=i,this.emit("keypress",t,i),this.emit("state",this.state.clone());let s=this.options[i.action]||this[i.action]||this.dispatch;if("function"==typeof s)return await s.call(this,t,i);this.alert()}alert(){delete this.state.alert,!1===this.options.show?this.emit("alert"):this.stdout.write(c.code.beep)}cursorHide(){this.stdout.write(c.cursor.hide()),l.onExit(()=>this.cursorShow())}cursorShow(){this.stdout.write(c.cursor.show())}write(t){t&&(this.stdout&&!1!==this.state.show&&this.stdout.write(t),this.state.buffer+=t)}clear(t=0){let e=this.state.buffer;this.state.buffer="",(e||t)&&!1!==this.options.show&&this.stdout.write(c.cursor.down(t)+c.clear(e,this.width))}restore(){if(this.state.closed||!1===this.options.show)return;let{prompt:t,after:e,rest:i}=this.sections(),{cursor:s,initial:r="",input:n="",value:o=""}=this,a={after:e,cursor:s,initial:r,input:n,prompt:t,size:this.state.size=i.length,value:o},h=c.cursor.restore(a);h&&this.stdout.write(h)}sections(){let{buffer:t,input:e,prompt:i}=this.state;i=r.unstyle(i);let s=r.unstyle(t),n=s.indexOf(i),o=s.slice(0,n),a=s.slice(n).split("\n"),h=a[0],l=a[a.length-1],c=(i+(e?" "+e:"")).length,u=c<h.length?h.slice(c+1):"";return{header:o,prompt:h,after:u,rest:a.slice(1),last:l}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let t=this.state.error||await this.validate(this.value,this.state);if(!0!==t){let e="\n"+this.symbols.pointer+" ";return e+="string"==typeof t?t.trim():"Invalid input",this.state.error="\n"+this.styles.danger(e),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,void(this.state.error=void 0)}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(t){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),"function"==typeof this.options.onCancel&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(t))}async close(){this.state.closed=!0;try{let t=this.sections(),e=Math.ceil(t.prompt.length/this.width);t.rest&&this.write(c.cursor.down(t.rest.length)),this.write("\n".repeat(e))}catch(t){}this.emit("close")}start(){this.stop||!1===this.options.show||(this.stop=n.listen(this,this.keypress.bind(this)),this.once("close",this.stop))}async skip(){return this.skipped=!0===this.options.skip,"function"==typeof this.options.skip&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:t,options:e,result:i}=this;if(this.format=()=>t.call(this,this.value),this.result=()=>i.call(this,this.value),"function"==typeof e.initial&&(this.initial=await e.initial.call(this,this)),"function"==typeof e.onRun&&await e.onRun.call(this,this),"function"==typeof e.onSubmit){let t=e.onSubmit.bind(this),i=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await t(this.name,this.value,this),i())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise(async(t,e)=>{if(this.once("submit",t),this.once("cancel",e),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")})}async element(t,e,i){let{options:s,state:r,symbols:n,timers:o}=this,a=o&&o[t];r.timer=a;let h=s[t]||r[t]||n[t],l=e&&null!=e[t]?e[t]:await h;if(""===l)return l;let c=await this.resolve(l,r,e,i);return!c&&e&&e[t]?this.resolve(h,r,e,i):c}async prefix(){let t=await this.element("prefix")||this.symbols,e=this.timers&&this.timers.prefix,i=this.state;if(i.timer=e,l.isObject(t)&&(t=t[i.status]||t.pending),!l.hasColor(t)){return(this.styles[i.status]||this.styles.pending)(t)}return t}async message(){let t=await this.element("message");return l.hasColor(t)?t:this.styles.strong(t)}async separator(){let t=await this.element("separator")||this.symbols,e=this.timers&&this.timers.separator,i=this.state;i.timer=e;let s=t[i.status]||t.pending||i.separator,r=await this.resolve(s,i);return l.isObject(r)&&(r=r[i.status]||r.pending),l.hasColor(r)?r:this.styles.muted(r)}async pointer(t,e){let i=await this.element("pointer",t,e);if("string"==typeof i&&l.hasColor(i))return i;if(i){let t=this.styles,s=this.index===e,r=s?t.primary:t=>t,n=await this.resolve(i[s?"on":"off"]||i,this.state),o=l.hasColor(n)?n:r(n);return s?o:" ".repeat(n.length)}}async indicator(t,e){let i=await this.element("indicator",t,e);if("string"==typeof i&&l.hasColor(i))return i;if(i){let e=this.styles,s=!0===t.enabled,r=s?e.success:e.dark,n=i[s?"on":"off"]||i;return l.hasColor(n)?n:r(n)}return""}body(){return null}footer(){if("pending"===this.state.status)return this.element("footer")}header(){if("pending"===this.state.status)return this.element("header")}async hint(){if("pending"===this.state.status&&!this.isValue(this.state.input)){let t=await this.element("hint");return l.hasColor(t)?t:this.styles.muted(t)}}error(t){return this.state.submitted?"":t||this.state.error}format(t){return t}result(t){return t}validate(t){return!0!==this.options.required||this.isValue(t)}isValue(t){return null!=t&&""!==t}resolve(t,...e){return l.resolve(this,t,...e)}get base(){return u.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||l.height(this.stdout,25)}get width(){return this.options.columns||l.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(t){this.state.cursor=t}get cursor(){return this.state.cursor}set input(t){this.state.input=t}get input(){return this.state.input}set value(t){this.state.value=t}get value(){let{input:t,value:e}=this.state,i=[e,t].find(this.isValue.bind(this));return this.isValue(i)?i:this.initial}static get prompt(){return t=>new this(t).run()}}t.exports=u},427:(t,e,i)=>{"use strict";const s=i(466);t.exports=class extends s{constructor(t){super(t),this.cursorShow()}moveCursor(t){this.state.cursor+=t}dispatch(t){return this.append(t)}space(t){return this.options.multiple?super.space(t):this.append(t)}append(t){let{cursor:e,input:i}=this.state;return this.input=i.slice(0,e)+t+i.slice(e),this.moveCursor(1),this.complete()}delete(){let{cursor:t,input:e}=this.state;return e?(this.input=e.slice(0,t-1)+e.slice(t),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:t,input:e}=this.state;return void 0===e[t]?this.alert():(this.input=(""+e).slice(0,t)+(""+e).slice(t+1),this.complete())}number(t){return this.append(t)}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(t=this.input,e=this.state._choices){if("function"==typeof this.options.suggest)return this.options.suggest.call(this,t,e);let i=t.toLowerCase();return e.filter(t=>t.message.toLowerCase().includes(i))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map(t=>this.styles.primary(t.message)).join(", ");if(this.state.submitted){let t=this.value=this.input=this.focused.value;return this.styles.primary(t)}return this.input}async render(){if("pending"!==this.state.status)return super.render();let t=this.options.highlight?this.options.highlight.bind(this):this.styles.placeholder,e=((t,e)=>{let i=t.toLowerCase();return t=>{let s=t.toLowerCase().indexOf(i),r=e(t.slice(s,s+i.length));return s>=0?t.slice(0,s)+r+t.slice(s+i.length):t}})(this.input,t),i=this.choices;this.choices=i.map(t=>({...t,message:e(t.message)})),await super.render(),this.choices=i}submit(){return this.options.multiple&&(this.value=this.selected.map(t=>t.name)),super.submit()}}},466:(t,e,i)=>{"use strict";const s=i(575),r=i(546);t.exports=class extends s{constructor(t){super(t),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}separator(){if(this.options.separator)return super.separator();let t=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():t}pointer(t,e){return!this.multiple||this.options.pointer?super.pointer(t,e):""}indicator(t,e){return this.multiple?super.indicator(t,e):""}choiceMessage(t,e){let i=this.resolve(t.message,this.state,t,e);return"heading"!==t.role||r.hasColor(i)||(i=this.styles.strong(i)),this.resolve(i,this.state,t,e)}choiceSeparator(){return":"}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e,s=await this.pointer(t,e),n=await this.indicator(t,e)+(t.pad||""),o=await this.resolve(t.hint,this.state,t,e);o&&!r.hasColor(o)&&(o=this.styles.muted(o));let a=this.indent(t),h=await this.choiceMessage(t,e),l=()=>[this.margin[3],a+s+n,h,this.margin[1],o].filter(Boolean).join(" ");return"heading"===t.role?l():t.disabled?(r.hasColor(h)||(h=this.styles.disabled(h)),l()):(i&&(h=this.styles.em(h)),l())}async renderChoices(){if("choices"===this.state.loading)return this.styles.warning("Loading choices");if(this.state.submitted)return"";let t=this.visible.map(async(t,e)=>await this.renderChoice(t,e)),e=await Promise.all(t);e.length||e.push(this.styles.danger("No matching choices"));let i,s=this.margin[0]+e.join("\n");return this.options.choicesHeader&&(i=await this.resolve(this.options.choicesHeader,this.state)),[i,s].filter(Boolean).join("\n")}format(){return!this.state.submitted||this.state.cancelled?"":Array.isArray(this.selected)?this.selected.map(t=>this.styles.primary(t.name)).join(", "):this.styles.primary(this.selected.name)}async render(){let{submitted:t,size:e}=this.state,i="",s=await this.header(),r=await this.prefix(),n=await this.separator(),o=await this.message();!1!==this.options.promptLine&&(i=[r,o,n,""].join(" "),this.state.prompt=i);let a=await this.format(),h=await this.error()||await this.hint(),l=await this.renderChoices(),c=await this.footer();a&&(i+=a),h&&!i.includes(h)&&(i+=" "+h),t&&!a&&!l.trim()&&this.multiple&&null!=this.emptyError&&(i+=this.styles.danger(this.emptyError)),this.clear(e),this.write([s,i,l,c].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}}},502:(t,e,i)=>{"use strict";const s=i(546),r={default:(t,e)=>e,checkbox(t,e){throw new Error("checkbox role is not implemented yet")},editable(t,e){throw new Error("editable role is not implemented yet")},expandable(t,e){throw new Error("expandable role is not implemented yet")},heading:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find(t=>null!=t),e.message=e.message||"",e),input(t,e){throw new Error("input role is not implemented yet")},option:(t,e)=>r.default(t,e),radio(t,e){throw new Error("radio role is not implemented yet")},separator:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find(t=>null!=t),e.message=e.message||t.symbols.line.repeat(5),e),spacer:(t,e)=>e};t.exports=(t,e={})=>{let i=s.merge({},r,e.roles);return i[t]||i.default}},873:(t,e,i)=>{"use strict";const{define:s,width:r}=i(546);t.exports=class{constructor(t){let e=t.options;s(this,"_prompt",t),this.type=t.type,this.name=t.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=r(e.stdout||process.stdout),Object.assign(this,e),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=t.symbols,this.styles=t.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let t={...this};return t.status=this.status,t.buffer=Buffer.from(t.buffer),delete t.clone,t}set color(t){this._color=t}get color(){let t=this.prompt.styles;if(this.cancelled)return t.cancelled;if(this.submitted)return t.submitted;let e=this._color||t[this.status];return"function"==typeof e?e:t.pending}set loading(t){this._loading=t}get loading(){return"boolean"==typeof this._loading?this._loading:!!this.loadingChoices&&"choices"}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}}},217:(t,e,i)=>{"use strict";const s=i(546),r=i(730),n={default:r.noop,noop:r.noop,set inverse(t){this._inverse=t},get inverse(){return this._inverse||s.inverse(this.primary)},set complement(t){this._complement=t},get complement(){return this._complement||s.complement(this.primary)},primary:r.cyan,success:r.green,danger:r.magenta,strong:r.bold,warning:r.yellow,muted:r.dim,disabled:r.gray,dark:r.dim.gray,underline:r.underline,set info(t){this._info=t},get info(){return this._info||this.primary},set em(t){this._em=t},get em(){return this._em||this.primary.underline},set heading(t){this._heading=t},get heading(){return this._heading||this.muted.underline},set pending(t){this._pending=t},get pending(){return this._pending||this.primary},set submitted(t){this._submitted=t},get submitted(){return this._submitted||this.success},set cancelled(t){this._cancelled=t},get cancelled(){return this._cancelled||this.danger},set typing(t){this._typing=t},get typing(){return this._typing||this.dim},set placeholder(t){this._placeholder=t},get placeholder(){return this._placeholder||this.primary.dim},set highlight(t){this._highlight=t},get highlight(){return this._highlight||this.inverse},merge:(t={})=>{t.styles&&"boolean"==typeof t.styles.enabled&&(r.enabled=t.styles.enabled),t.styles&&"boolean"==typeof t.styles.visible&&(r.visible=t.styles.visible);let e=s.merge({},n,t.styles);delete e.merge;for(let t of Object.keys(r))e.hasOwnProperty(t)||Reflect.defineProperty(e,t,{get:()=>r[t]});for(let t of Object.keys(r.styles))e.hasOwnProperty(t)||Reflect.defineProperty(e,t,{get:()=>r[t]});return e}};t.exports=n},739:(t,e,i)=>{"use strict";const s="win32"===process.platform,r=i(730),n=i(546),o={...r.symbols,upDownDoubleArrow:"â‡•",upDownDoubleArrow2:"â¬",upDownArrow:"â†•",asterisk:"*",asterism:"â‚",bulletWhite:"â—¦",electricArrow:"âŒ",ellipsisLarge:"â‹¯",ellipsisSmall:"â€¦",fullBlock:"â–ˆ",identicalTo:"â‰¡",indicator:r.symbols.check,leftAngle:"â€¹",mark:"â€»",minus:"âˆ’",multiplication:"Ã—",obelus:"Ã·",percent:"%",pilcrow:"Â¶",pilcrow2:"â¡",pencilUpRight:"âœ",pencilDownRight:"âœŽ",pencilRight:"âœ",plus:"+",plusMinus:"Â±",pointRight:"â˜ž",rightAngle:"â€º",section:"Â§",hexagon:{off:"â¬¡",on:"â¬¢",disabled:"â¬¢"},ballot:{on:"â˜‘",off:"â˜",disabled:"â˜’"},stars:{on:"â˜…",off:"â˜†",disabled:"â˜†"},folder:{on:"â–¼",off:"â–¶",disabled:"â–¶"},prefix:{pending:r.symbols.question,submitted:r.symbols.check,cancelled:r.symbols.cross},separator:{pending:r.symbols.pointerSmall,submitted:r.symbols.middot,cancelled:r.symbols.middot},radio:{off:s?"( )":"â—¯",on:s?"(*)":"â—‰",disabled:s?"(|)":"â’¾"},numbers:["â“ª","â‘ ","â‘¡","â‘¢","â‘£","â‘¤","â‘¥","â‘¦","â‘§","â‘¨","â‘©","â‘ª","â‘«","â‘¬","â‘­","â‘®","â‘¯","â‘°","â‘±","â‘²","â‘³","ã‰‘","ã‰’","ã‰“","ã‰”","ã‰•","ã‰–","ã‰—","ã‰˜","ã‰™","ã‰š","ã‰›","ã‰œ","ã‰","ã‰ž","ã‰Ÿ","ãŠ±","ãŠ²","ãŠ³","ãŠ´","ãŠµ","ãŠ¶","ãŠ·","ãŠ¸","ãŠ¹","ãŠº","ãŠ»","ãŠ¼","ãŠ½","ãŠ¾","ãŠ¿"]};o.merge=t=>{let e=n.merge({},r.symbols,o,t.symbols);return delete e.merge,e},t.exports=o},227:(t,e,i)=>{"use strict";const s=i(217),r=i(739),n=i(546);t.exports=t=>{t.options=n.merge({},t.options.theme,t.options),t.symbols=r.merge(t.options),t.styles=s.merge(t.options)}},940:t=>{"use strict";function e(t,e,i={}){let s=t.timers[e]={name:e,start:Date.now(),ms:0,tick:0},r=i.interval||120;s.frames=i.frames||[],s.loading=!0;let n=setInterval(()=>{s.ms=Date.now()-s.start,s.tick++,t.render()},r);return s.stop=()=>{s.loading=!1,clearInterval(n)},Reflect.defineProperty(s,"interval",{value:n}),t.once("close",()=>s.stop()),s.stop}t.exports=t=>{t.timers=t.timers||{};let i=t.options.timers;if(i)for(let s of Object.keys(i)){let r=i[s];"number"==typeof r&&(r={interval:r}),e(t,s,r)}}},575:(t,e,i)=>{"use strict";const s=i(730),r=i(232),n=i(502),o=i(546),{reorder:a,scrollUp:h,scrollDown:l,isObject:c,swap:u}=o;function p(t,e){if(e instanceof Promise)return e;if("function"==typeof e){if(o.isAsyncFn(e))return e;e=e.call(t,t)}for(let i of e){if(Array.isArray(i.choices)){let e=i.choices.filter(e=>!t.isDisabled(e));i.enabled=e.every(t=>!0===t.enabled)}!0===t.isDisabled(i)&&delete i.enabled}return e}t.exports=class extends r{constructor(t){super(t),this.cursorHide(),this.maxSelected=t.maxSelected||1/0,this.multiple=t.multiple||!1,this.initial=t.initial||0,this.delay=t.delay||0,this.longest=0,this.num=""}async initialize(){"function"==typeof this.options.initial&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:t,initial:e,autofocus:i,suggest:s}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(t)),this.choices.forEach(t=>t.enabled=!1),"function"!=typeof s&&0===this.selectable.length)throw new Error("At least one choice must be selectable");c(e)&&(e=Object.keys(e)),Array.isArray(e)?(null!=i&&(this.index=this.findIndex(i)),e.forEach(t=>this.enable(this.find(t))),await this.render()):(null!=i&&(e=i),"string"==typeof e&&(e=this.findIndex(e)),"number"==typeof e&&e>-1&&(this.index=Math.max(0,Math.min(e,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(t,e){this.state.loadingChoices=!0;let i=[],s=0,r=async(t,e)=>{"function"==typeof t&&(t=await t.call(this)),t instanceof Promise&&(t=await t);for(let n=0;n<t.length;n++){let o=t[n]=await this.toChoice(t[n],s++,e);i.push(o),o.choices&&await r(o.choices,o)}return i};return r(t,e).then(t=>(this.state.loadingChoices=!1,t))}async toChoice(t,e,i){if("function"==typeof t&&(t=await t.call(this,this)),t instanceof Promise&&(t=await t),"string"==typeof t&&(t={name:t}),t.normalized)return t;t.normalized=!0;let r=t.value,a=n(t.role,this.options);if("string"!=typeof(t=a(this,t)).disabled||t.hint||(t.hint=t.disabled,t.disabled=!0),!0===t.disabled&&null==t.hint&&(t.hint="(disabled)"),null!=t.index)return t;t.name=t.name||t.key||t.title||t.value||t.message,t.message=t.message||t.name||"",t.value=[t.value,t.name].find(this.isValue.bind(this)),t.input="",t.index=e,t.cursor=0,o.define(t,"parent",i),t.level=i?i.level+1:1,null==t.indent&&(t.indent=i?i.indent+"  ":t.indent||""),t.path=i?i.path+"."+t.name:t.name,t.enabled=!(!this.multiple||this.isDisabled(t)||!t.enabled&&!this.isSelected(t)),this.isDisabled(t)||(this.longest=Math.max(this.longest,s.unstyle(t.message).length));let h={...t};return t.reset=(e=h.input,i=h.value)=>{for(let e of Object.keys(h))t[e]=h[e];t.input=e,t.value=i},null==r&&"function"==typeof t.initial&&(t.input=await t.initial.call(this,this.state,t,e)),t}async onChoice(t,e){this.emit("choice",t,e,this),"function"==typeof t.onChoice&&await t.onChoice.call(this,this.state,t,e)}async addChoice(t,e,i){let s=await this.toChoice(t,e,i);return this.choices.push(s),this.index=this.choices.length-1,this.limit=this.choices.length,s}async newItem(t,e,i){let s={name:"New choice name?",editable:!0,newChoice:!0,...t},r=await this.addChoice(s,e,i);return r.updateChoice=()=>{delete r.newChoice,r.name=r.message=r.input,r.input="",r.cursor=0},this.render()}indent(t){return null==t.indent?t.level>1?"  ".repeat(t.level-1):"":t.indent}dispatch(t,e){if(this.multiple&&this[e.name])return this[e.name]();this.alert()}focus(t,e){return"boolean"!=typeof e&&(e=t.enabled),e&&!t.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=t.index,t.enabled=e&&!this.isDisabled(t),t)}space(){return this.multiple?(this.toggle(this.focused),this.render()):this.alert()}a(){if(this.maxSelected<this.choices.length)return this.alert();let t=this.selectable.every(t=>t.enabled);return this.choices.forEach(e=>e.enabled=!t),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach(t=>t.enabled=!t.enabled),this.render())}g(t=this.focused){return this.choices.some(t=>!!t.parent)?(this.toggle(t.parent&&!t.choices?t.parent:t),this.render()):this.a()}toggle(t,e){if(!t.enabled&&this.selected.length>=this.maxSelected)return this.alert();"boolean"!=typeof e&&(e=!t.enabled),t.enabled=e,t.choices&&t.choices.forEach(t=>this.toggle(t,e));let i=t.parent;for(;i;){let t=i.choices.filter(t=>this.isDisabled(t));i.enabled=t.every(t=>!0===t.enabled),i=i.parent}return p(this,this.choices),this.emit("toggle",t,this),t}enable(t){return this.selected.length>=this.maxSelected?this.alert():(t.enabled=!this.isDisabled(t),t.choices&&t.choices.forEach(this.enable.bind(this)),t)}disable(t){return t.enabled=!1,t.choices&&t.choices.forEach(this.disable.bind(this)),t}number(t){this.num+=t;let e=t=>{let e=Number(t);if(e>this.choices.length-1)return this.alert();let i=this.focused,s=this.choices.find(t=>e===t.index);if(!s.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(-1===this.visible.indexOf(s)){let t=a(this.choices),e=t.indexOf(s);if(i.index>e){let i=t.slice(e,e+this.limit),s=t.filter(t=>!i.includes(t));this.choices=i.concat(s)}else{let i=e-this.limit+1;this.choices=t.slice(i).concat(t.slice(0,i))}}return this.index=this.choices.indexOf(s),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise(t=>{let i=this.choices.length,s=this.num,r=(i=!1,r)=>{clearTimeout(this.numberTimeout),i&&(r=e(s)),this.num="",t(r)};return"0"===s||1===s.length&&Number(s+"0")>i?r(!0):Number(s)>i?r(!1,this.alert()):void(this.numberTimeout=setTimeout(()=>r(!0),this.delay))})}home(){return this.choices=a(this.choices),this.index=0,this.render()}end(){let t=this.choices.length-this.limit,e=a(this.choices);return this.choices=e.slice(t).concat(e.slice(0,t)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&0===i?this.alert():t>e&&0===i?this.scrollUp():(this.index=(i-1%t+t)%t,this.isDisabled()?this.up():this.render())}down(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&i===e-1?this.alert():t>e&&i===e-1?this.scrollDown():(this.index=(i+1)%t,this.isDisabled()?this.down():this.render())}scrollUp(t=0){return this.choices=h(this.choices),this.index=t,this.isDisabled()?this.up():this.render()}scrollDown(t=this.visible.length-1){return this.choices=l(this.choices),this.index=t,this.isDisabled()?this.down():this.render()}async shiftUp(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index-1),await this.up(),void(this.sorting=!1)):this.scrollUp(this.index)}async shiftDown(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index+1),await this.down(),void(this.sorting=!1)):this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(t){u(this.choices,this.index,t)}isDisabled(t=this.focused){return!(!t||!["disabled","collapsed","hidden","completing","readonly"].some(e=>!0===t[e]))||t&&"heading"===t.role}isEnabled(t=this.focused){if(Array.isArray(t))return t.every(t=>this.isEnabled(t));if(t.choices){let e=t.choices.filter(t=>!this.isDisabled(t));return t.enabled&&e.every(t=>this.isEnabled(t))}return t.enabled&&!this.isDisabled(t)}isChoice(t,e){return t.name===e||t.index===Number(e)}isSelected(t){return Array.isArray(this.initial)?this.initial.some(e=>this.isChoice(t,e)):this.isChoice(t,this.initial)}map(t=[],e="value"){return[].concat(t||[]).reduce((t,i)=>(t[i]=this.find(i,e),t),{})}filter(t,e){let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=(this.options.multiple?this.state._choices:this.choices).filter(i);return e?s.map(t=>t[e]):s}find(t,e){if(c(t))return e?t[e]:t;let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=this.choices.find(i);return s?e?s[e]:s:void 0}findIndex(t){return this.choices.indexOf(this.find(t))}async submit(){let t=this.focused;if(!t)return this.alert();if(t.newChoice)return t.input?(t.updateChoice(),this.render()):this.alert();if(this.choices.some(t=>t.newChoice))return this.alert();let{reorder:e,sort:i}=this.options,s=!0===this.multiple,r=this.selected;return void 0===r?this.alert():(Array.isArray(r)&&!1!==e&&!0!==i&&(r=o.reorder(r)),this.value=s?r.map(t=>t.name):r.name,super.submit())}set choices(t=[]){this.state._choices=this.state._choices||[],this.state.choices=t;for(let e of t)this.state._choices.some(t=>t.name===e.name)||this.state._choices.push(e);if(!this._initial&&this.options.initial){this._initial=!0;let t=this.initial;if("string"==typeof t||"number"==typeof t){let e=this.find(t);e&&(this.initial=e.index,this.focus(e,!0))}}}get choices(){return p(this,this.state.choices||[])}set visible(t){this.state.visible=t}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(t){this.state.limit=t}get limit(){let{state:t,options:e,choices:i}=this,s=t.limit||this._limit||e.limit||i.length;return Math.min(s,this.height)}set value(t){super.value=t}get value(){return"string"!=typeof super.value&&super.value===this.initial?this.input:super.value}set index(t){this.state.index=t}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let t=this.choices[this.index];return t&&this.state.submitted&&!0!==this.multiple&&(t.enabled=!0),t}get selectable(){return this.choices.filter(t=>!this.isDisabled(t))}get selected(){return this.multiple?this.enabled:this.focused}}},546:(t,e,i)=>{"use strict";const s=Object.prototype.toString,r=i(730);let n=!1,o=[];const a={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};e.longest=(t,e)=>t.reduce((t,i)=>Math.max(t,e?i[e].length:i.length),0),e.hasColor=t=>!!t&&r.hasColor(t);const h=e.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t);e.nativeType=t=>s.call(t).slice(8,-1).toLowerCase().replace(/\s/g,""),e.isAsyncFn=t=>"asyncfunction"===e.nativeType(t),e.isPrimitive=t=>null!=t&&"object"!=typeof t&&"function"!=typeof t,e.resolve=(t,e,...i)=>"function"==typeof e?e.call(t,...i):e,e.scrollDown=(t=[])=>[...t.slice(1),t[0]],e.scrollUp=(t=[])=>[t.pop(),...t],e.reorder=(t=[])=>{let e=t.slice();return e.sort((t,e)=>t.index>e.index?1:t.index<e.index?-1:0),e},e.swap=(t,e,i)=>{let s=t.length,r=i===s?0:i<0?s-1:i,n=t[e];t[e]=t[r],t[r]=n},e.width=(t,e=80)=>{let i=t&&t.columns?t.columns:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[0]),"win32"===process.platform?i-1:i},e.height=(t,e=20)=>{let i=t&&t.rows?t.rows:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[1]),i},e.wordWrap=(t,e={})=>{if(!t)return t;"number"==typeof e&&(e={width:e});let{indent:i="",newline:s="\n"+i,width:r=80}=e,n=(s+i).match(/[^\S\n]/g)||[];r-=n.length;let o=`.{1,${r}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,a=t.trim(),h=new RegExp(o,"g"),l=a.match(h)||[];return l=l.map(t=>t.replace(/\n$/,"")),e.padEnd&&(l=l.map(t=>t.padEnd(r," "))),e.padStart&&(l=l.map(t=>t.padStart(r," "))),i+l.join(s)},e.unmute=t=>{let e=t.stack.find(t=>r.keys.color.includes(t));return e?r[e]:t.stack.find(t=>"bg"===t.slice(2))?r[e.slice(2)]:t=>t},e.pascal=t=>t?t[0].toUpperCase()+t.slice(1):"",e.inverse=t=>{if(!t||!t.stack)return t;let i=t.stack.find(t=>r.keys.color.includes(t));if(i){let s=r["bg"+e.pascal(i)];return s?s.black:t}let s=t.stack.find(t=>"bg"===t.slice(0,2));return s?r[s.slice(2).toLowerCase()]||t:r.none},e.complement=t=>{if(!t||!t.stack)return t;let i=t.stack.find(t=>r.keys.color.includes(t)),s=t.stack.find(t=>"bg"===t.slice(0,2));if(i&&!s)return r[a[i]||i];if(s){let i=s.slice(2).toLowerCase(),n=a[i];return n&&r["bg"+e.pascal(n)]||t}return r.none},e.meridiem=t=>{let e=t.getHours(),i=t.getMinutes(),s=e>=12?"pm":"am";return e%=12,(0===e?12:e)+":"+(i<10?"0"+i:i)+" "+s},e.set=(t={},i="",s)=>i.split(".").reduce((t,i,r,n)=>{let o=n.length-1>r?t[i]||{}:s;return!e.isObject(o)&&r<n.length-1&&(o={}),t[i]=o},t),e.get=(t={},e="",i)=>{let s=null==t[e]?e.split(".").reduce((t,e)=>t&&t[e],t):t[e];return null==s?i:s},e.mixin=(t,i)=>{if(!h(t))return i;if(!h(i))return t;for(let s of Object.keys(i)){let r=Object.getOwnPropertyDescriptor(i,s);if(r.hasOwnProperty("value"))if(t.hasOwnProperty(s)&&h(r.value)){let n=Object.getOwnPropertyDescriptor(t,s);h(n.value)?t[s]=e.merge({},t[s],i[s]):Reflect.defineProperty(t,s,r)}else Reflect.defineProperty(t,s,r);else Reflect.defineProperty(t,s,r)}return t},e.merge=(...t)=>{let i={};for(let s of t)e.mixin(i,s);return i},e.mixinEmitter=(t,i)=>{let s=i.constructor.prototype;for(let r of Object.keys(s)){let n=s[r];"function"==typeof n?e.define(t,r,n.bind(i)):e.define(t,r,n)}},e.onExit=t=>{const e=(t,e)=>{n||(n=!0,o.forEach(t=>t()),!0===t&&process.exit(128+e))};0===o.length&&(process.once("SIGTERM",e.bind(null,!0,15)),process.once("SIGINT",e.bind(null,!0,2)),process.once("exit",e)),o.push(t)},e.define=(t,e,i)=>{Reflect.defineProperty(t,e,{value:i})},e.defineExport=(t,e,i)=>{let s;Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,set(t){s=t},get:()=>s?s():i()})}},57:function(t){!function(e){"use strict";function i(){console.log.apply(console,arguments)}var s=/ +/g,r={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:a,sortFn:function(t,e){return t.score-e.score},getFn:function t(e,i,s){var r,n,a,h,l,c;if(i){if(-1!==(a=i.indexOf("."))?(r=i.slice(0,a),n=i.slice(a+1)):r=i,null!=(h=e[r]))if(n||"string"!=typeof h&&"number"!=typeof h)if(o(h))for(l=0,c=h.length;l<c;l++)t(h[l],n,s);else n&&t(h,n,s);else s.push(h)}else s.push(e);return s},keys:[],verbose:!1,tokenize:!1};function n(t,e){var i,s,n,o;for(this.list=t,this.options=e=e||{},i=0,s=(o=["sort","shouldSort","verbose","tokenize"]).length;i<s;i++)n=o[i],this.options[n]=n in e?e[n]:r[n];for(i=0,s=(o=["searchFn","sortFn","keys","getFn","include"]).length;i<s;i++)n=o[i],this.options[n]=e[n]||r[n]}function o(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t,e){e=e||{},this.options=e,this.options.location=e.location||a.defaultOptions.location,this.options.distance="distance"in e?e.distance:a.defaultOptions.distance,this.options.threshold="threshold"in e?e.threshold:a.defaultOptions.threshold,this.options.maxPatternLength=e.maxPatternLength||a.defaultOptions.maxPatternLength,this.pattern=e.caseSensitive?t:t.toLowerCase(),this.patternLen=t.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}n.VERSION="2.2.0",n.prototype.set=function(t){return this.list=t,t},n.prototype.search=function(t){return this.options.verbose&&i("\nSearch term:",t,"\n"),this.pattern=t,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort(),this._format()},n.prototype._prepareSearchers=function(){var t=this.options,e=this.pattern,i=t.searchFn,r=e.split(s),n=0,o=r.length;if(this.options.tokenize)for(this.tokenSearchers=[];n<o;n++)this.tokenSearchers.push(new i(r[n],t));this.fullSeacher=new i(e,t)},n.prototype._startSearch=function(){var t,e,i,s,r=this.options.getFn,n=this.list,o=n.length,a=this.options.keys,h=a.length,l=null;if("string"==typeof n[0])for(i=0;i<o;i++)this._analyze("",n[i],i,i);else for(this._keyMap={},i=0;i<o;i++)for(l=n[i],s=0;s<h;s++){if("string"!=typeof(t=a[s])){if(e=1-t.weight||1,this._keyMap[t.name]={weight:e},t.weight<=0||t.weight>1)throw new Error("Key weight has to be > 0 and <= 1");t=t.name}else this._keyMap[t]={weight:1};this._analyze(t,r(l,t,[]),l,i)}},n.prototype._analyze=function(t,e,r,n){var a,h,l,c,u,p,d,f,m,g,b,y,w,v=this.options,x=!1;if(null!=e)if(h=[],"string"==typeof e){if(a=e.split(s),v.verbose&&i("---------\nKey:",t),v.verbose&&i("Record:",a),this.options.tokenize){for(this.tokenSearchers.length,y=0;y<this.tokenSearchers.length;y++){for(f=this.tokenSearchers[y],m=[],w=0;w<a.length;w++)g=a[w],(b=f.search(g)).isMatch?(x=!0,m.push(b.score),h.push(b.score)):(m.push(1),h.push(1));v.verbose&&i("Token scores:",m)}for(c=h[0],p=h.length,y=1;y<p;y++)c+=h[y];c/=p,v.verbose&&i("Token score average:",c)}d=this.fullSeacher.search(e),v.verbose&&i("Full text score:",d.score),u=d.score,void 0!==c&&(u=(u+c)/2),v.verbose&&i("Score average:",u),(x||d.isMatch)&&((l=this.resultMap[n])?l.output.push({key:t,score:u,matchedIndices:d.matchedIndices}):(this.resultMap[n]={item:r,output:[{key:t,score:u,matchedIndices:d.matchedIndices}]},this.results.push(this.resultMap[n])))}else if(o(e))for(y=0;y<e.length;y++)this._analyze(t,e[y],r,n)},n.prototype._computeScore=function(){var t,e,s,r,n,o,a,h,l=this._keyMap,c=this.results;for(this.options.verbose&&i("\n\nComputing score:\n"),t=0;t<c.length;t++){for(s=0,n=(r=c[t].output).length,a=1,e=0;e<n;e++)h=r[e].score*(o=l?l[r[e].key].weight:1),1!==o?a=Math.min(a,h):(s+=h,r[e].nScore=h);c[t].score=1===a?s/n:a,this.options.verbose&&i(c[t])}},n.prototype._sort=function(){var t=this.options;t.shouldSort&&(t.verbose&&i("\n\nSorting...."),this.results.sort(t.sortFn))},n.prototype._format=function(){var t,e,s,r,n,o=this.options,a=o.getFn,h=[],l=this.results,c=o.include;for(o.verbose&&i("\n\nOutput:\n\n",l),r=o.id?function(t){l[t].item=a(l[t].item,o.id,[])[0]}:function(){},n=function(t){var e,i,s,r,n,o=l[t];if(c.length>0){if(e={item:o.item},-1!==c.indexOf("matches"))for(s=o.output,e.matches=[],i=0;i<s.length;i++)n={indices:(r=s[i]).matchedIndices},r.key&&(n.key=r.key),e.matches.push(n);-1!==c.indexOf("score")&&(e.score=l[t].score)}else e=o.item;return e},e=0,s=l.length;e<s;e++)r(e),t=n(e),h.push(t);return h},a.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},a.prototype._calculatePatternAlphabet=function(){var t={},e=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]|=1<<this.pattern.length-e-1;return t},a.prototype._bitapScore=function(t,e){var i=t/this.patternLen,s=Math.abs(this.options.location-e);return this.options.distance?i+s/this.options.distance:s?1:i},a.prototype.search=function(t){var e,i,r,n,o,a,h,l,c,u,p,d,f,m,g,b,y,w,v,x,k,O,S=this.options;if(t=S.caseSensitive?t:t.toLowerCase(),this.pattern===t)return{isMatch:!0,score:0,matchedIndices:[[0,t.length-1]]};if(this.patternLen>S.maxPatternLength){if(w=!!(y=t.match(new RegExp(this.pattern.replace(s,"|")))))for(x=[],e=0,k=y.length;e<k;e++)O=y[e],x.push([t.indexOf(O),O.length-1]);return{isMatch:w,score:w?.5:1,matchedIndices:x}}for(n=S.location,r=t.length,o=S.threshold,a=t.indexOf(this.pattern,n),v=[],e=0;e<r;e++)v[e]=0;for(-1!=a&&(o=Math.min(this._bitapScore(0,a),o),-1!=(a=t.lastIndexOf(this.pattern,n+this.patternLen))&&(o=Math.min(this._bitapScore(0,a),o))),a=-1,g=1,b=[],c=this.patternLen+r,e=0;e<this.patternLen;e++){for(h=0,l=c;h<l;)this._bitapScore(e,n+l)<=o?h=l:c=l,l=Math.floor((c-h)/2+h);for(c=l,u=Math.max(1,n-l+1),p=Math.min(n+l,r)+this.patternLen,(d=Array(p+2))[p+1]=(1<<e)-1,i=p;i>=u;i--)if((m=this.patternAlphabet[t.charAt(i-1)])&&(v[i-1]=1),d[i]=0===e?(d[i+1]<<1|1)&m:(d[i+1]<<1|1)&m|(f[i+1]|f[i])<<1|1|f[i+1],d[i]&this.matchmask&&(g=this._bitapScore(e,i-1))<=o){if(o=g,a=i-1,b.push(a),!(a>n))break;u=Math.max(1,2*n-a)}if(this._bitapScore(e+1,n)>o)break;f=d}return{isMatch:a>=0,score:0===g?.001:g,matchedIndices:x=this._getMatchedIndices(v)}},a.prototype._getMatchedIndices=function(t){for(var e,i=[],s=-1,r=-1,n=0,o=o=t.length;n<o;n++)(e=t[n])&&-1===s?s=n:e||-1===s||(r=n-1,i.push([s,r]),s=-1);return t[n-1]&&i.push([s,n-1]),i},t.exports=n}()},361:t=>{"use strict";t.exports=require("events")},521:t=>{"use strict";t.exports=require("readline")}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{"use strict";i.r(s),i.d(s,{default:()=>d});const t=require("@yarnpkg/cli"),e=require("@yarnpkg/plugin-essentials"),r=()=>{try{const t=e.default.commands;return t.find(t=>t.paths&&t.usage&&"run"===t.paths[0][0]&&"run a script defined in the package.json"===t.usage.description)}catch(t){}return class extends t.BaseCommand{constructor(){throw super(),new Error("heuristic module detection failed")}async execute(){}}},n=()=>{const t=process.argv[2];return!t||e.default.commands.map(t=>((null==t?void 0:t.paths)||[]).map(t=>t&&t[0])).flat().filter(Boolean).includes(t)?"__":t};class o extends(r()){constructor(){super(),this.scriptName=n()}}o.paths=[[n()]];var a=i(427),h=i.n(a),l=i(57),c=i.n(l);class u extends(h()){constructor(t){super({suggest:(t,e)=>{const i=new(c())(e,{keys:["message"]});return t.length?i.search(t).map(t=>t):e},...t}),this.state.cursor=(t.input||"").length}async run(){const t=super.run();return setTimeout(()=>{this.complete().catch(()=>{setTimeout(()=>{this.complete()},20)})},20),t}}const p=require("@yarnpkg/core");const d={commands:[class extends o{async execute(){try{return await super.execute()}catch(t){if(!(t instanceof Error&&t.message.startsWith("Couldn't find a script name")))throw t;const e=await this.askForScriptName();this.scriptName=e,e&&this.execute()}}async askForScriptName(){const t=await(async t=>{const e=await p.Configuration.find(t.context.cwd,t.context.plugins),{project:i,locator:s}=await p.Project.find(e,t.context.cwd),r=t.topLevel?i.topLevelWorkspace.anchoredLocator:s,n=[...(i.getWorkspaceByLocator(r).manifest.scripts||new Map).keys()].filter(t=>t&&"string"==typeof t&&!t.startsWith("#"));return{name:r.name,scriptNames:n}})(this),e="search"!==this.scriptName?this.scriptName:"";e&&console.log(`"yarn ${e}" not found in ${t.name}\n\n`);const i=new u({name:"scriptToRun",message:"ðŸ” search for a command",limit:10,choices:t.scriptNames,input:e});return await i.run().catch(()=>"")}}]}})(),plugin=s})();
return plugin;
}
};